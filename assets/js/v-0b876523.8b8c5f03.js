"use strict";(self.webpackChunkgriefdefender=self.webpackChunkgriefdefender||[]).push([[5546],{8303:(e,t,o)=>{o.r(t),o.d(t,{data:()=>a});const a={key:"v-0b876523",path:"/zh/guide/advanced/contexts.html",title:"情境",lang:"zh-CN",frontmatter:{title:"情境",category:["Usage"],icon:"semantic",summary:"简介 era情境era 常被 GD 用于限定各类行为的作用情境，要了解什么是情境，请参考 https://luckperms.net/wiki/Context 常见的情境使用方法有： 1. 限定 era标签era 的作用方式 2. 限定 era选项era 的影响范围（比如限制某类型领地的圈地上限 3. 限定 era权限era 4. ... GD 根据需要对 ",head:[["meta",{property:"og:url",content:"https://bloodmc.github.io/GrierDefenderDoc/GriefDefenderDoc/zh/guide/advanced/contexts.html"}],["meta",{property:"og:title",content:"情境"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"og:locale:alternate",content:"en-US"}],["meta",{name:"twitter:card",content:"summary_large_image"}]]},excerpt:"",headers:[{level:3,title:"How contexts are applied",slug:"how-contexts-are-applied",children:[]},{level:3,title:"Context core priority",slug:"context-core-priority",children:[]},{level:2,title:"FAQ",slug:"faq",children:[]}],git:{createdTime:1646217451e3,updatedTime:1646217451e3,contributors:[{name:"ahdg",email:"ahdg6@outlook.com",commits:1}]},readingTime:{minutes:5.55,words:1665},filePathRelative:"zh/guide/advanced/contexts.md"}},6469:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var a=o(6252);const i=(0,a.uE)('<h1 id="简介" tabindex="-1"><a class="header-anchor" href="#简介" aria-hidden="true">#</a> 简介</h1><p>era情境era 常被 GD 用于限定各类行为的作用情境，要了解什么是情境，请参考 https://luckperms.net/wiki/Context</p><p>常见的情境使用方法有：</p><ol><li>限定 era标签era 的作用方式</li><li>限定 era选项era 的影响范围（比如限制某类型领地的圈地上限</li><li>限定 era权限era</li><li>...</li></ol><p>GD 根据需要对 era情境era 进行了拓展，以便于你能客制化 era标签era 的使用体验，<strong>下边的列表可能不是最新的，看个乐呵就好</strong></p><table><thead><tr><th>情境</th><th>值</th><th>描述</th></tr></thead><tbody><tr><td><code>gd_claim</code></td><td><code>&lt;claim_uuid&gt;</code></td><td>Applies flag to claim with specified uuid.</td></tr><tr><td><code>gd_claim_default</code></td><td><code>admin</code><br><code>basic</code><br><code>subdivision</code><br><code>town</code><br><code>global</code><br><code>user</code></td><td>Applies flag as a default to all claims of type specified. <br>Note: Use <code>global</code> as value to apply to all types.<br>Note: Use <code>user</code> as value to apply to all types EXCEPT wilderness.</td></tr><tr><td><code>gd_claim_override</code></td><td><code>admin</code><br><code>basic</code><br><code>claim</code><br><code>subdivision</code><br><code>town</code><br><code>global</code><br><code>user</code></td><td>Applies flag as an override to all claims of type specified. <br>Note: Use <code>global</code> as value to apply to all types.<br>Note: Use <code>user</code> as value to apply to all types EXCEPT wilderness.</td></tr><tr><td><code>source</code></td><td><code>&lt;source_id&gt;</code></td><td>Applies flag to a specific source. <br>Example: <code>minecraft:creeper</code></td></tr><tr><td><code>target</code></td><td><code>&lt;target_id&gt;</code></td><td>Applies flag to a specific target. <br>Example: <code>minecraft:player</code> <br>Note: Target is <strong>ALWAYS</strong> required after the flag in /cf command usage, but more than one target can be specified with use of context.</td></tr><tr><td><code>state</code></td><td><code>&lt;state&gt;</code></td><td>Applies flag to a specific block state. <br>Example: <code>powered:true</code> <br> See https://minecraft.gamepedia.com/Block_states for a list of all vanilla block states.</td></tr><tr><td><code>used_item</code></td><td><code>&lt;item_id&gt;</code></td><td>Applies flag to a specific used item. <br>Example: <code>minecraft:diamond_sword</code></td></tr><tr><td><code>boots</code></td><td><code>&lt;item_id&gt;</code></td><td>Applies flag to specific worn boots. <br>Example: <code>minecraft:diamond_boots</code></td></tr><tr><td><code>chestplate</code></td><td><code>&lt;item_id&gt;</code></td><td>Applies flag to a specific worn chestplate. <br>Example: <code>minecraft:diamond_chestplate</code></td></tr><tr><td><code>helmet</code></td><td><code>&lt;item_id&gt;</code></td><td>Applies flag to a specific worn helmet. <br>Example: `minecraft:diamond_helmet</td></tr><tr><td><code>leggings</code></td><td><code>&lt;item_id&gt;</code></td><td>Applies flag to specific worn leggings. <br>Example: <code>minecraft:diamond_leggings</code></td></tr><tr><td><code>enchant</code></td><td><code>&lt;enchant_id&gt;</code></td><td>Applies flag to specific enchantment on item. <br>Example: <code>minecraft:flame</code></td></tr><tr><td><code>enchant_data</code></td><td><code>&lt;data_id&gt;</code></td><td>Applies flag to specific enchantment data on item. <br>Example: <code>lvl:3</code></td></tr><tr><td><code>mainhand_enchant</code></td><td><code>&lt;enchant_id&gt;</code></td><td>Applies flag to specific enchantment on item in main hand. <br>Example: <code>minecraft:efficiency</code></td></tr><tr><td><code>offhand_enchant</code></td><td><code>&lt;enchant_id&gt;</code></td><td>Applies flag to specific enchantment on item in off-hand. <br>Example: <code>minecraft:unbreaking</code></td></tr><tr><td><code>mainhand_enchant_data</code></td><td><code>&lt;data_id&gt;</code></td><td>Applies flag to specific enchantment data on item in main hand. <br>Example: <code>lvl:1</code></td></tr><tr><td><code>offhand_enchant_data</code></td><td><code>&lt;data_id&gt;</code></td><td>Applies flag to specific enchantment data on item in off-hand. <br>Example: <code>lvl:2</code></td></tr><tr><td><code>potion_effect</code></td><td><code>&lt;potion_effect_id&gt;</code></td><td>Applies flag to specific potion effect. <br>Example: <code>minecraft:speed</code></td></tr><tr><td><code>run_as</code></td><td><code>console</code><br><code>player</code></td><td>Run command as console or player. <br>Note: This context only applies to <code>griefdefender.player-command-enter</code> and <code>griefdefender.player-command-exit</code> options</td></tr><tr><td><code>run_for</code></td><td><code>member</code><br><code>owner</code><br><code>public</code></td><td>Run command for only trusted members of claim, only for owner of claim, or only for everyone except the claim owner. More than one can be used at the same time for desired effected users. <br>Note: This context only applies to <code>griefdefender.player-command-enter</code> and <code>griefdefender.player-command-exit</code> options</td></tr><tr><td><code>server</code></td><td><code>&lt;server_name&gt;</code></td><td>Applies flag to a specific server.<br>Note: This uses the server name specified in permissions plugin. If no server context is specified or server name is not set, it defaults to <code>global</code>.</td></tr><tr><td><code>world</code></td><td><code>&lt;world_name&gt;</code></td><td>Applies flag to a specific world.</td></tr></tbody></table><p>Note: Every flag or option permission will ALWAYS contain one of the following core contexts <code>gd_claim</code>, <code>gd_claim_default</code>, or <code>gd_claim_override</code>.<br> Note: When using contexts with commands <code>/cf</code>, <code>/claimoption</code>, or <code>flags.conf</code> you can use the following aliases for context keys<br><code>gd_claim_default</code> - <code>default</code><br><code>gd_claim_override</code> - <code>override</code><br> So as an example<br><code>/cf block-break grass false gd_claim_default=global</code><br> is the same as<br><code>/cf block-break grass false default=global</code></p><p>However, in LuckPerms it will ALWAYS show up as the actual context key which in this case would be <code>gd_claim_default</code></p><h3 id="how-contexts-are-applied" tabindex="-1"><a class="header-anchor" href="#how-contexts-are-applied" aria-hidden="true">#</a> How contexts are applied</h3>',9),d=(0,a.Uk)("Note: A uuid stands for "),c={href:"https://en.wikipedia.org/wiki/Universally_unique_identifier",target:"_blank",rel:"noopener noreferrer"},n=(0,a.Uk)("Universal Unique Identifier"),l=(0,a.Uk)(" which GD assigns to each claim created in the world."),s=(0,a.uE)('<ul><li><strong>gd_claim</strong></li></ul><p>⚠️ This context does NOT affect owners of claims when used with flags but does affect owners when used with options ⚠️</p><p>The context <code>gd_claim=&lt;claim_uuid&gt;</code> is used to apply a flag or option to a specific claim that matches the uuid specified.<br> Note: If you ONLY want to apply a flag or option to the claim you are standing in, GD will automatically apply this context as long as you do not provide <code>gd_claim</code>, <code>gd_claim_default</code>, or <code>gd_claim_override</code> in the context section of command.</p><p>Let&#39;s go over an example of how this would look in LuckPerms</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    {\n      &quot;permission&quot;: &quot;griefdefender.flag.entity-spawn&quot;,\n      &quot;value&quot;: false,\n      &quot;context&quot;: {\n        &quot;gd_claim&quot;: &quot;9594ca69-47d6-422a-8236-7c697d832ac9&quot;,\n        &quot;target&quot;: &quot;#animal&quot;\n      }\n    },\n</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>This permission is denying the flag <code>entity-spawn</code> in claim with uuid <code>9594ca69-47d6-422a-8236-7c697d832ac9</code> targeting only animals.</p><ul><li><strong>gd_claim_default</strong></li></ul><p>⚠️ This context does NOT affect owners of claims when used with flags but does affect owners when used with options ⚠️</p><p>It is used to apply a flag or option to one or more claim types or globally and acts as a default permission meaning it is applied to users until a higher context is used.<br> See https://github.com/bloodmc/GriefDefender/wiki/Contexts#context-core-priority</p><p>Let&#39;s break each combination down</p><p><code>gd_claim_default=admin</code> - A permission containing this context will only affect admin claims and act as a default permission.<br><code>gd_claim_default=basic</code> - A permission containing this context will only affect basic claims and act as a default permission.<br><code>gd_claim_default=subdivision</code> - A permission containing this context will only affect subdivision claims and act as a default permission.<br><code>gd_claim_default=global</code> - A permission containing this context will affect all claims, including wilderness, and act as a default permission.<br><code>gd_claim_default=user</code> - A permission containing this context will affect all claims except wilderness and act as a default permission.</p><p>Taking our previous LuckPerms example, here is how it might show up as a permission</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    {\n      &quot;permission&quot;: &quot;griefdefender.flag.entity-spawn&quot;,\n      &quot;value&quot;: false,\n      &quot;context&quot;: {\n        &quot;gd_claim_default&quot;: &quot;admin&quot;,\n        &quot;target&quot;: &quot;#animal&quot;\n      }\n    },\n</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>This permission is denying the flag <code>entity-spawn</code> as a default on all admin claims and targeting only animals.</p><ul><li><strong>gd_claim_override</strong></li></ul><p>⚠️ This context DOES affect owners of claims ⚠️</p><p>The most important thing about this context is it is the only context that will affect claim owners.<br> It is used to apply a flag or option to a single claim, one or more claim types, or globally. It essentially acts as a ban.</p><p>Let&#39;s break each combination down</p><p><code>gd_claim_override=&lt;claim_uuid&gt;</code> - A permission containing this context will only affect the claim that contains the uuid.<br> Note: When using this context with commands, you can replace <code>&lt;claim_uuid&gt;</code> with <code>claim</code> and GD will automatically fill in the uuid.<br><code>gd_claim_override=admin</code> - A permission containing this context will only affect admin claims.<br><code>gd_claim_override=basic</code> - A permission containing this context will only affect basic claims.<br><code>gd_claim_override=subdivision</code> - A permission containing this context will only affect subdivision claims.<br><code>gd_claim_override=global</code> - A permission containing this context will affect all claims including wilderness.<br><code>gd_claim_override=user</code> - A permission containing this context will affect all claims except wilderness.</p><p>Let&#39;s go over an example of how this would look in LuckPerms</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    {\n      &quot;permission&quot;: &quot;griefdefender.flag.entity-spawn&quot;,\n      &quot;value&quot;: false,\n      &quot;context&quot;: {\n        &quot;gd_claim_override&quot;: &quot;basic&quot;,\n        &quot;target&quot;: &quot;#animal&quot;\n      }\n    },\n</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>This permission is banning the ability to spawn animals in ALL basic claims. It will also affect claim owners.</p><h3 id="context-core-priority" tabindex="-1"><a class="header-anchor" href="#context-core-priority" aria-hidden="true">#</a> Context core priority</h3><p>One of the following contexts are required in every flag or option permission set in LuckPerms <code>gd_claim_default</code>, <code>gd_claim</code>, <code>gd_claim_override</code></p><p>The order of context priority in permissions is as follows starting with the lowest</p><ul><li><code>gd_claim_default</code> - Lowest priority. Always used with the <code>griefdefender_definition</code> and <code>griefdefender_default</code> groups to apply as a default to all players.</li><li><code>gd_claim</code> - Higher than default. If using commands or ADVANCED GUI, these permissions will always end up in <code>griefdefender_claim</code> group. If using the flag definition GUI w/ PRESET, permissions will always end up in <code>griefdefender_definition</code>.<br> Note: When using commands <code>/cfp</code>, <code>/cfg</code>, <code>/cop</code>, <code>/cog</code> which will apply a flag or permission to user or group, the <code>gd_claim</code> context will always be used.</li><li><code>gd_claim_override</code> - The highest priority context GD uses. GD will always do a permission lookup for any permission with this context. If found, this will be the end result. This context supports overrides to a single claim or multiple. For single claim, the claim uuid is used as the value. For multiple, the same values as <code>gd_claim_default</code> can be used.</li></ul><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq" aria-hidden="true">#</a> FAQ</h2><ol><li>Why do some contexts not affect owners when used with flags?<br> A. The reason is simple, it gives claim owners the ability to manage their own claims from non-trusted players. So an owner can deny specific actions but still have themselves not be affected.</li><li>Do flags affect trusted users?<br> A. Trusted users may not be affected depending on the level of trust required for the action. For example, if a player attempts to place a block in a claim, the <code>block-place</code> flag would be checked with <code>builder</code>. GD would then verify if a flag is specifically denying this action against the user and if not it would proceed to check if the user has <code>builder</code> trust or higher and if so stop there and allow the action.<br> Note: Overrides will always affect owners and trusted users.</li><li>How would I know what contexts, trust, permissions are being checked when I perform an action?<br> If you are an administrator, you can find information for each action by performing a <code>/gddebug record claim</code> command inside the claim you are in.<br> See https://github.com/bloodmc/GriefDefender/wiki/Debugging for more info</li></ol>',28),r={},p=(0,o(3744).Z)(r,[["render",function(e,t){const o=(0,a.up)("ExternalLinkIcon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,(0,a._)("p",null,[d,(0,a._)("a",c,[n,(0,a.Wm)(o)]),l]),s],64)}]])}}]);